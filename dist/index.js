(function(f,n){typeof exports=="object"&&typeof module!="undefined"?module.exports=n(require("highlight.js"),require("painter-kernel")):typeof define=="function"&&define.amd?define(["highlight.js","painter-kernel"],n):(f=typeof globalThis!="undefined"?globalThis:f||self).phl=n(f.hljs,f.painter)})(this,function(f,n){"use strict";function j(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var R=j(f);return function(i,v,r,_,A){let s=[],y={default:{color:"#55b5db"},property:{color:"#a074c4"},comment:{color:"#41535b"},literal:{color:"#ee3300ef"},doctag:{color:"#ff7b72"},built_in:{color:"#55b5db"},keyword:{color:"#e6cd69"},"template-tag":{color:"#ff7b72"},"template-variable":{color:"#9fca56"},type:{color:"#9fca56"},string:{color:"#55b5db"},attr:{color:"#ff7b72"},number:{color:"#cd3f45"},params:{color:"#55b5db"},"variable.language":{color:"#55b5db"},"variable.constant":{color:"#55b5db"},subst:{color:"Purple"},title:{color:"#d2a8ff"},"title.class":{color:"#df88df"},"title.class.inherited":{color:"#dda8ff"},"title.function":{color:"#a074c4"},deletion:{color:"#ffdcd7",backgroundColor:"#67060c"},addition:{color:"#aff5b4",backgroundColor:"#033a16"},strong:{color:"#c9d1d9",fontWeight:"bold"},emphasis:{color:"#c9d1d9",fontStyle:"italic"},sign:{color:"#fff"},attribute:{color:"#9fca56"}},e=R.default.highlight(_,{language:A})._emitter.stack[0].children;const p=new Map(Object.entries(y)),a=RegExp(/\n/g),w=RegExp(/([^\s])/g),x=RegExp(/([\s])/g),g=RegExp(/\t/g);let u=0,b=0,d=0,k=0,m=0,o=[];_.split(`
`).filter((t,l)=>{const c=l+1;let h;return h=t.match(w)?.length+t.match(x)?.length+(t.match(g)?.length?t.match(g)?.length:0),m<h&&(m=h||0),k++,c>=0&&c<=1e3}).join(`
`);for(let t=0;t<e.length;t++)if(typeof e[t]=="string")if(e[t].match(a)&&e[t].match(w)){let l=e[t],c=e[t].match(a);for(;c.length;){let h=l.indexOf(c[0]);l.slice(0,h)&&o.push(l.slice(0,h)),o.push(l.slice(h,h+1)),l=l.slice(h+1),c.shift()}o.push(l)}else o.push(e[t]);else if(e[t].kind==="comment")o.push(e[t]);else if(e[t].kind==="property"&&e[t].children[0].children)o.push(e[t].children[0].children[0]);else if(e[t].children.length>1){let l=e[t].children;for(let c of l)o.push(c)}else o.push(e[t]);let E=[];o.forEach(t=>{t!==""&&E.push(t)}),e=E;for(let t=0;t<e.length;t++){let l={id:"hl0_"+t,text:"",type:"text",css:{top:"calc(hl0_"+(t-1)+".top)",left:"calc(hl0_"+(t-1)+".right)",color:y.default.color,fontSize:"16px"}};if(typeof e[t]=="object"){let c;e[t].children.length?(l.text=e[t].children.join(""),l.css.left="calc(hl0_"+(t-1)+".right + 1px)",c=p.get(e[t].kind)):(l.text=e[t].children,l.css.left="calc(hl0_"+(t-1)+".right - 5px)",c=p.get(e[t].kind)),d&&(l.css.left="calc(hl0_"+(t-1)+".right - 8px)",d=0),e[t].children.length&&e[t].children[0].match!==null&&e[t].children[0]?.match(/\/\*\*/g)&&(b+=e[t].children[0].match(a)?.length?e[t].children[0].match(a)?.length:0),l.css.color=c?c.color:p.get("default").color}else if(typeof e[t]=="string"){if(l.text=e[t],e[t].match(RegExp(/^[a-zA-Z]/g))?l.css.color=p.get("string").color:e[t].match(RegExp(/=/g))?l.css.color=p.get("attribute").color:l.css.color=p.get("sign").color,l.css.left="calc(hl0_"+(t-1)+".right + 2px)",d&&(l.css.left="calc(hl0_"+(t-1)+".right - 8px)",d=0),e[t].match(x)?.length){let c=e[t].match(x)?.length;l.css.left="calc(hl0_"+(t-1)+".right +"+2*c+" px)"}e[t].match(a)&&!e[t].match(/\`/g)?u=e[t].match(a).length:e[t]===" "?l.css.left="calc(hl0_"+(t-1)+".right - 8px)":(e[t].match(/\(/)||e[t].match(/\[/))&&(l.css.left="calc(hl0_"+(t-1)+".right + 4px)",d=1)}u&&(l.css.top="calc(hl0_"+(t-1)+".top +"+20*(u+b)+" px)",l.css.left="0",e[t].match(a)&&e[t].slice(2)&&(l.css.left="calc(hl0_0.right)"),u=0,b=0),typeof e[t]=="string"&&e[t].match(g)&&(l.css.left="calc(hl0_"+t+".right + "+18*e[t].match(g).length+"px)"),s.push(l)}s[0].css.top="55px",s[1].css.left="calc(hl0_0.right + 0px)",s[0].css.left="0",s.unshift({id:"hl1_3",type:"rect",css:{top:"18px",left:"58px",height:"12px",width:"12px",color:"#1AAB29",borderRadius:"50%"}}),s.unshift({id:"hl1_1",type:"rect",css:{top:"18px",left:"38px",height:"12px",width:"12px",color:"#DEA123",borderRadius:"50%"}}),s.unshift({id:"hl1_0",type:"rect",css:{top:"18px",left:"18px",height:"12px",width:"12px",color:"#E0443E",borderRadius:"50%"}}),r.height=="auto"&&(r.height=20*k+60+"px"),r.width=="auto"&&(r.width=10.5*m+"px"),i.width=n.toPx(r.width),i.height=n.toPx(r.height),r.views=s,new n.Pen(v,r).paint()}});
