!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("highlight.js"),require("painter-kernel")):"function"==typeof define&&define.amd?define(["highlight.js","painter-kernel"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).phl=t(e.hljs,e.painter)}(this,(function(e,t){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(e);return function(e,l,o,i,f){let r=[];let h={default:{color:"#c9d1d9"},comment:{color:"#c9d1d9"},doctag:{color:"#ff7b72"},built_in:{color:"#ee3300ef"},keyword:{color:"#ff7b72"},"template-tag":{color:"#ff7b72"},"template-variable":{color:"#ff7b72"},type:{color:"#ff7b72"},string:{color:"#afa5b4"},attr:{color:"#ff7b72"},number:{color:"#afe5bb"},params:{color:"#aff5b4"},"variable.language":{color:"#ff7b72"},subst:{color:"Purple"},title:{color:"#d2a8ff"},"title.class":{color:"#df88df"},"title.class.inherited":{color:"#dda8ff"},"title.function":{color:"#d2a8ff"},deletion:{color:"#ffdcd7",backgroundColor:"#67060c"},addition:{color:"#aff5b4",backgroundColor:"#033a16"},strong:{color:"#c9d1d9",fontWeight:"bold"},emphasis:{color:"#c9d1d9",fontStyle:"italic"},sign:{color:"#2f2f2fee"}},s=c.default.highlight(i,{language:f})._emitter.stack[0].children;const n=new Map(Object.entries(h)),a=RegExp(/\n/g),d=RegExp(/([^\s])/g);let g=0,p=0,u=0,b=[];for(let e=0;e<s.length;e++)if("string"==typeof s[e])if(s[e].match(a)&&s[e].match(d)){let t=s[e],l=s[e].match(d);for(;l.length;)t.slice(0,t.indexOf(l[0]))&&b.push(t.slice(0,t.indexOf(l[0]))),b.push(t.slice(t.indexOf(l[0]),t.indexOf(l[0])+1)),t=t.slice(t.indexOf(l[0])+1),l.shift();b.push(t)}else b.push(s[e]);else if("comment"===s[e].kind)b.push(s[e]);else if(s[e].children.length>1){let t=s[e].children;for(let e of t)b.push(e)}else b.push(s[e]);s=b;for(let e=0;e<s.length;e++){let t={id:"hl0_"+e,text:"",type:"text",css:{top:"calc(hl0_"+(e-1)+".top)",left:"calc(hl0_"+(e-1)+".right)",color:h.default.color,fontSize:"16px"}};if("object"==typeof s[e]){let l;if(s[e].children.length?(t.text=s[e].children.join(""),t.css.left="calc(hl0_"+(e-1)+".right + 1px)",l=n.get(s[e].kind)):(t.text=s[e].children,t.css.left="calc(hl0_"+(e-1)+".right - 5px)",l=n.get(s[e].kind)),u&&(t.css.left="calc(hl0_"+(e-1)+".right - 8px)",u=0),s[e].children.length&&s[e].children[0].match(/\/\*\*/g)){if(s[e].children[0].match(/\*\//g))p++;else for(let t of s[e].children)t.match(a)&&(p+=t.match(a).length);p--}t.css.color=l?l.color:n.get("default")}else"string"==typeof s[e]&&(t.text=s[e],t.css.color=n.get("sign").color,t.css.left="calc(hl0_"+(e-1)+".right + 2px)",u&&(t.css.left="calc(hl0_"+(e-1)+".right - 8px)",u=0),s[e].match(a)&&!s[e].match(/\`/g)?g=s[e].match(a).length:" "===s[e]?t.css.left="calc(hl0_"+(e-1)+".right - 4px)":s[e].match(/\(/)&&(t.css.left="calc(hl0_"+(e-1)+".right + 4px)",u=1));g&&(t.css.top="calc(hl0_"+(e-1)+".top +"+20*(g+p)+" px)",t.css.left="0",s[e].match(a)&&s[e].slice(2)&&(t.css.left="calc(hl0_0.right)"),g=0,p=0),r.push(t)}r[0].css.top="5px",r[1].css.left="calc(hl0_0.right*2)",r[0].css.left="0",e.width=t.toPx(o.width),e.height=t.toPx(o.height),o.views=r;new t.Pen(l,o).paint((()=>{}))}}));
