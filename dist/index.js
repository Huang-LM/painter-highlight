(function(n,f){typeof exports=="object"&&typeof module!="undefined"?module.exports=f(require("highlight.js"),require("painter-kernel")):typeof define=="function"&&define.amd?define(["highlight.js","painter-kernel"],f):(n=typeof globalThis!="undefined"?globalThis:n||self).phl=f(n.hljs,n.painter)})(this,function(n,f){"use strict";function w(h){return h&&typeof h=="object"&&"default"in h?h:{default:h}}var v=w(n);return function(h,E,r,b,P){let a=[],x={default:{color:"#c9d1d9"},comment:{color:"#c9d1d9"},doctag:{color:"#ff7b72"},built_in:{color:"#ee3300ef"},keyword:{color:"#ff7b72"},"template-tag":{color:"#ff7b72"},"template-variable":{color:"#ff7b72"},type:{color:"#ff7b72"},string:{color:"#afa5b4"},attr:{color:"#ff7b72"},number:{color:"#afe5bb"},params:{color:"#aff5b4"},"variable.language":{color:"#ff7b72"},subst:{color:"Purple"},title:{color:"#d2a8ff"},"title.class":{color:"#df88df"},"title.class.inherited":{color:"#dda8ff"},"title.function":{color:"#d2a8ff"},deletion:{color:"#ffdcd7",backgroundColor:"#67060c"},addition:{color:"#aff5b4",backgroundColor:"#033a16"},strong:{color:"#c9d1d9",fontWeight:"bold"},emphasis:{color:"#c9d1d9",fontStyle:"italic"},sign:{color:"#2f2f2fee"}},t=v.default.highlight(b,{language:P})._emitter.stack[0].children;const g=new Map(Object.entries(x)),s=RegExp(/\n/g),_=RegExp(/([^\s])/g),y=RegExp(/\t/g);let p=0,u=0,d=0,k=0,m=0,o=[];b.split(`
`).filter((e,l)=>{const c=l+1;let i;return i=e.match(_)?.length,m<i&&(m=i||0),k++,c>=0&&c<=1e3}).join(`
`);for(let e=0;e<t.length;e++)if(typeof t[e]=="string")if(t[e].match(s)&&t[e].match(_)){let l=t[e],c=t[e].match(s);for(;c.length;){let i=l.indexOf(c[0]);l.slice(0,i)&&o.push(l.slice(0,i)),o.push(l.slice(i,i+1)),l=l.slice(i+1),c.shift()}o.push(l)}else o.push(t[e]);else if(t[e].kind==="comment")o.push(t[e]);else if(t[e].kind==="property"&&t[e].children[0].children)o.push(t[e].children[0].children[0]);else if(t[e].children.length>1){let l=t[e].children;for(let c of l)o.push(c)}else o.push(t[e]);let j=[];o.forEach(e=>{e!==""&&j.push(e)}),t=j;for(let e=0;e<t.length;e++){let l={id:"hl0_"+e,text:"",type:"text",css:{top:"calc(hl0_"+(e-1)+".top)",left:"calc(hl0_"+(e-1)+".right)",color:x.default.color,fontSize:"16px"}};if(typeof t[e]=="object"){let c;t[e].children.length?(l.text=t[e].children.join(""),l.css.left="calc(hl0_"+(e-1)+".right + 1px)",c=g.get(t[e].kind)):(l.text=t[e].children,l.css.left="calc(hl0_"+(e-1)+".right - 5px)",c=g.get(t[e].kind)),d&&(l.css.left="calc(hl0_"+(e-1)+".right - 8px)",d=0),t[e].children.length&&t[e].children[0].match!==null&&t[e].children[0].match(/\/\*\*/g)&&(u+=t[e].children[0].match(s).length),l.css.color=c?c.color:g.get("default")}else typeof t[e]=="string"&&(l.text=t[e],l.css.color=g.get("sign").color,l.css.left="calc(hl0_"+(e-1)+".right + 2px)",d&&(l.css.left="calc(hl0_"+(e-1)+".right - 8px)",d=0),t[e].match(s)&&!t[e].match(/\`/g)?p=t[e].match(s).length:t[e]===" "?l.css.left="calc(hl0_"+(e-1)+".right - 8px)":t[e].match(/\(/)&&(l.css.left="calc(hl0_"+(e-1)+".right + 4px)",d=1));p&&(l.css.top="calc(hl0_"+(e-1)+".top +"+20*(p+u)+" px)",l.css.left="0",t[e].match(s)&&t[e].slice(2)&&(l.css.left="calc(hl0_0.right)"),p=0,u=0),typeof t[e]=="string"&&t[e].match(y)&&(l.css.left="calc(hl0_"+e+".right + "+18*t[e].match(y).length+"px)"),a.push(l)}a[0].css.top="5px",a[1].css.left="calc(hl0_0.right*2)",a[0].css.left="0",r.height=="auto"&&(r.height=19*k+"px"),r.width=="auto"&&(r.width=14*m+"px"),h.width=f.toPx(r.width),h.height=f.toPx(r.height),r.views=a,new f.Pen(E,r).paint(()=>{})}});
